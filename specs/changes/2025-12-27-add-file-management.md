# 設計変更記録: ファイル管理機能の追加 (2025-12-27)

## 変更理由 (Reason)

ユーザーがアップロードした画像や PDF、および AI が生成した画像などのデジタルアセットが増加した際、ストレージ容量を圧迫する可能性がある。これらを適切に管理（閲覧・削除）し、ローカルストレージ（IndexedDB）をクリーンに保つ手段を提供する必要があるため。

## 変更内容 (Changes)

### 1. 要件の追加 (`requirements.md`)

- ユーザーによるアップロードファイルおよび生成 AI による生成ファイルの一覧表示、プレビュー、個別・一括削除機能を追加。

### 2. インターフェースの追加 (`detailed/services.md`)

- `FileService` に `listFiles`, `deleteFile`, `getFileSizeStats` などを追加。

### 3. UI 設計の拡張 (`ui_ux.md` & `detailed/components.md`)

- 設定画面または専用ビューとして「ファイルマネージャー（またはギャラリー）」を追加。
- ストレージ使用量の統計表示を追加。
- ギャラリー形式でのプレビューおよび削除インターフェースを定義。

### 4. データモデルの補足

- `LocalFiles` (Message に紐付かない独立したファイル) も管理対象に含める (既存モデルで対応可能だが、用途を明確化)。
