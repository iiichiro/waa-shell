# 要件変更: 高度なスラッシュコマンド（プロンプトテンプレート）

## 1. 変更の背景
単なるテキスト挿入ではなく、動的に変わる部分（変数）を管理可能にし、再利用性の高いプロンプト管理を実現する。

## 2. 詳細仕様

### 2.1 データ管理
- **SlashCommand テーブル**: IndexedDB に以下の構造で保存する。
  - `id`: 自動採番
  - `key`: 呼び出しコマンド（例: `summary`）
  - `label`: 表示名
  - `description`: コマンドの説明
  - `content`: プロンプト本体（`{{variable}}` を含む）
  - `variables`: 変数メタデータの配列
    - `name`: 変数名（`content` 内のキーと一致）
    - `label`: UI上での表示名
    - `description`: 入力時の説明
    - `defaultValue`: デフォルト値

### 2.2 変数の処理
- **パース機能**: `content` 内から `{{...}}` を自動で抽出し、未定義の変数があればメタデータを自動生成する。
- **同期入力**: 入力インターフェースにおいて、同じ変数名に対する値は一元管理され、複数箇所の埋め込みに同時に反映される。

### 2.3 入力フロー
1. ユーザーが `/` を入力。
2. コマンドリストをサジェスト。
3. コマンドを選択すると、変数入力用のモーダル（またはインラインフォーム）を表示。
4. 全ての変数を入力（またはデフォルト値を採用）して「挿入」を押すと、置換後のプロンプトがチャット入力欄に入る。

## 3. 影響範囲
- **Data Layer**: `db.ts` への `slash_commands` テーブル追加。
- **Service Layer**: テンプレート置換ロジックの追加。
- **UI Layer**: 変数入力用の新しいコンポーネント。
